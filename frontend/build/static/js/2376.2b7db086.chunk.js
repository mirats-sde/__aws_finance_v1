/*! For license information please see 2376.2b7db086.chunk.js.LICENSE.txt */
(self.webpackChunkinvoive=self.webpackChunkinvoive||[]).push([[2376,554],{3001:function(e,n,i){"use strict";i.r(n),i.d(n,{useCustomerContext:function(){return p}});var t=i(4942),o=i(1413),l=i(885),a=i(4569),r=i.n(a),s=i(2791),d=i(7689),c=i(9356),u=i(184),v=(0,s.createContext)(),p=function(){return(0,s.useContext)(v)};n.default=function(e){var n=e.children,i=(0,d.s0)(),a=(0,c.UseGlobalContext)().setSnackbar,p=(0,s.useState)({billing_address:{place_of_supply:"INTERNATIONAL"},shipping_address:{place_of_supply:"INTERNATIONAL"}}),h=(0,l.Z)(p,2),m=h[0],_=h[1],x=(0,s.useState)(!1),g=(0,l.Z)(x,2),f=g[0],j=g[1],b=(0,s.useState)([]),y=(0,l.Z)(b,2),C=y[0],Z=y[1],N=(0,s.useCallback)((function(){r().get("https://finance.miratsoneservices.com/api/get-customer").then((function(e){Z(null===e||void 0===e?void 0:e.data)})).catch((function(e){return console.log(e)}))}),[C]);(0,s.useEffect)((function(){N()}),[]);var w={handleChange:function(e){_((function(n){return(0,o.Z)((0,o.Z)({},n),{},(0,t.Z)({},e.target.name,e.target.value))}))},disableBTN:f,setDisableBTN:j,customerInputData:m,getAllCustomerData:N,setCustomerInputData:_,customerBillingAddressChange:function(e){_((function(n){return(0,o.Z)((0,o.Z)({},n),{},{billing_address:(0,o.Z)((0,o.Z)({},n.billing_address),{},(0,t.Z)({},e.target.name,e.target.value))})}))},customerShippingAddressChange:function(e){_((function(n){return(0,o.Z)((0,o.Z)({},n),{},{shipping_address:(0,o.Z)((0,o.Z)({},n.shipping_address),{},(0,t.Z)({},e.target.name,e.target.value))})}))},submitAddCustomer:function(){console.log("submit"),j(!0),i("/clients"),r().post("https://finance.miratsoneservices.com/api/create-customer",m).then((function(e){console.log(e.data),r().post("https://finance.miratsoneservices.com/api/create-tax-information",(0,o.Z)({customer_id:e.data.customer_id},null===m||void 0===m?void 0:m.tax_information)),r().post("https://finance.miratsoneservices.com/api/create-billing-address",(0,o.Z)({customer_id:e.data.customer_id},null===m||void 0===m?void 0:m.billing_address)),r().post("https://finance.miratsoneservices.com/api/create-shipping_address",(0,o.Z)({customer_id:e.data.customer_id},null===m||void 0===m?void 0:m.shipping_address)),r().post("https://finance.miratsoneservices.com/api/create-customer-bank-details",(0,o.Z)({customer_id:e.data.customer_id},null===m||void 0===m?void 0:m.bank_details)).then((function(e){return N()}),j(!1),a({open:!0,severity:"success",msg:"Customer Added Successfully!"}))})).catch((function(e){return console.log(e)}))},allCustomerData:C,setAllCustomerData:Z};return(0,u.jsx)(v.Provider,{value:w,children:n})}},3228:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return z}});var t,o=i(4942),l=i(1413),a=i(885),r=i(168),s=i(2791),d="invoice_invoice_table_container__3NEy8",c="invoice_left_invoice_table__1xGSy",u="invoice_table_header__jkmH6",v="invoice_left_table_header__xJ-JW",p="invoice_icon__Yhe+z",h="invoice_right_header__WAp3x",m="invoice_right_invoice_table__DSxiE",_="invoice_table_stats__lzFLd",x="invoice_invoice_table__869uu",g="invoice_light__WFiCv",f="invoice_invoiceLink__5Xdvu",j="invoice_warning__T1Lmd",b="invoice_create__epU3b",y="invoice_invoiceNumber__48r+q",C="invoice_customerLink__UX1a3",Z="invoice_active__opXU-",N="invoice_canceled__CCwuG",w="invoice_cancelledRow__ybt4M",D="invoice_menuItem__mR6gw",S="invoice_loaderContainer__yPtTZ",A=i(3457),I=i(3677),P=i(554),U=i(3001),L=i(7689),T=i(1087),k=(i(1694),i(7205)),M=i(7997),F=i(7254),R=i(6839),E=i(6082),B=i(184),O=i(9704),J=(0,A.Z)(I.Z)(t||(t=(0,r.Z)(["\n  & .MuiTablePaginationUnstyled-toolbar {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    align-items: flex-start;\n    gap: 12px;\n    padding: 0.5em 0em;\n\n    @media (min-width: 768px) {\n      flex-direction: row;\n      align-items: center;\n    }\n  }\n\n  & .MuiTablePaginationUnstyled-selectLabel {\n    margin: 0;\n  }\n\n  & .MuiTablePaginationUnstyled-select {\n    padding: 0.1em 1em;\n    border-radius: 5px;\n    box-shadow: rgba(0, 0, 0, 0.05) 0px 6px 24px 0px,\n      rgba(0, 0, 0, 0.08) 0px 0px 0px 1px;\n    border: none;\n    font-weight: 700;\n    font-size: 14px;\n    color: #484848;\n    outline: none;\n  }\n\n  & .MuiTablePaginationUnstyled-displayedRows {\n    margin: 0;\n\n    @media (min-width: 768px) {\n      margin-left: auto;\n    }\n  }\n\n  & .MuiTablePaginationUnstyled-spacer {\n    display: none;\n  }\n\n  & .MuiTablePaginationUnstyled-actions {\n    display: flex;\n    gap: 0.5rem;\n    padding: 0.5em;\n  }\n\n  & .MuiTablePaginationUnstyled-actions button {\n    padding: 0.1em 0.5em;\n    border: 1px solid #828282;\n    cursor: pointer;\n    background-color: white;\n    border-radius: 5px;\n    box-shadow: rgba(0, 0, 0, 0.05) 0px 6px 24px 0px,\n      rgba(0, 0, 0, 0.08) 0px 0px 0px 1px;\n    border: none;\n  }\n\n  & .MuiTablePaginationUnstyled-actions span {\n    // padding: 0 0.8em;\n    padding: 1em;\n    color: #484848;\n    font-weight: 700;\n  }\n"]))),z=function(){var e,n,i,t=(0,s.useState)({}),r=(0,a.Z)(t,2),A=r[0],I=r[1],z=(0,P.useInvoiceContext)(),G=z.allInvoicesData,W=z.allCompanyData,X=(0,U.useCustomerContext)().allCustomerData,Y=(0,s.useState)(0),H=(0,a.Z)(Y,2),q=H[0],V=H[1],K=(0,s.useState)(10),Q=(0,a.Z)(K,2),$=Q[0],ee=Q[1],ne=((0,L.s0)(),s.useState(null)),ie=(0,a.Z)(ne,2),te=ie[0],oe=ie[1],le=(0,s.useState)({}),ae=(0,a.Z)(le,2),re=ae[0],se=ae[1],de=Boolean(te),ce=function(e){var n=O.AES.encrypt(e,"MiratsInsights").toString();return O.enc.Base64.parse(n).toString(O.enc.Hex)};return console.log(G),console.log(re),(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(R.default,{}),(0,B.jsxs)("div",{className:d,children:[(0,B.jsxs)("div",{className:c,children:[(0,B.jsxs)("div",{className:u,children:[(0,B.jsxs)("div",{className:v,children:[(0,B.jsx)(k.Z,{id:"basic-button","aria-controls":de?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":de?"true":void 0,onClick:function(e){oe(e.currentTarget)},children:"Create Invoice"}),(0,B.jsx)(M.Z,{id:"basic-menu",anchorEl:te,open:de,onClose:function(){oe(null)},MenuListProps:{"aria-labelledby":"basic-button"},children:(0,B.jsxs)("span",{className:D,children:[(0,B.jsx)(F.Z,{children:(0,B.jsx)(T.rU,{to:"/create-domestic-invoice",children:"Domestic Invoice"})}),(0,B.jsx)(F.Z,{children:(0,B.jsx)(T.rU,{to:"/create-international-invoice",children:"International Invoice"})})]})}),(0,B.jsx)("input",{type:"search",className:p,placeholder:"Search....",onChange:function(e){I((function(n){return(0,l.Z)((0,l.Z)({},n),{},{search:e.target.value})})),""!==e.target.value?ee(-1):ee(10)}})]}),(0,B.jsxs)("div",{className:h,children:[(0,B.jsxs)("select",{style:{width:"100px"},name:"company_id",onChange:function(e){se((function(n){return(0,l.Z)((0,l.Z)({},n),{},(0,o.Z)({},e.target.name,e.target.value))})),""!==e.target.value?ee(-1):ee(10)},children:[(0,B.jsx)("option",{value:"",selected:!0,children:"Company"}),null===W||void 0===W?void 0:W.map((function(e){return(0,B.jsx)("option",{value:null===e||void 0===e?void 0:e.company_id,children:null===e||void 0===e?void 0:e.company_name})}))]}),(0,B.jsxs)("select",{name:"payment_status",onChange:function(e){se((function(n){return(0,l.Z)((0,l.Z)({},n),{},(0,o.Z)({},e.target.name,e.target.value))})),""!==e.target.value?ee(-1):ee(10)},children:[(0,B.jsx)("option",{value:"",selected:!0,children:"Filter: All"}),(0,B.jsx)("option",{value:"paid",children:"PAID"}),(0,B.jsx)("option",{value:"unpaid",children:"UNPAID"}),(0,B.jsx)("option",{value:"canceled",children:"CANCELED"})]}),(0,B.jsxs)("select",{name:"month",onChange:function(e){se((function(n){return(0,l.Z)((0,l.Z)({},n),{},(0,o.Z)({},e.target.name,e.target.value))})),""!==e.target.value?ee(-1):ee(10)},children:[(0,B.jsx)("option",{value:"",selected:!0,children:"Filter: All Months"}),(0,B.jsx)("option",{value:"0",children:"January"}),(0,B.jsx)("option",{value:"1",children:"February"}),(0,B.jsx)("option",{value:"2",children:"March"}),(0,B.jsx)("option",{value:"3",children:"April"}),(0,B.jsx)("option",{value:"4",children:"May"}),(0,B.jsx)("option",{value:"5",children:"June"}),(0,B.jsx)("option",{value:"6",children:"July"}),(0,B.jsx)("option",{value:"7",children:"August"}),(0,B.jsx)("option",{value:"8",children:"September"}),(0,B.jsx)("option",{value:"9",children:"October"}),(0,B.jsx)("option",{value:"10",children:"November"}),(0,B.jsx)("option",{value:"11",children:"December"})]}),(0,B.jsxs)("select",{name:"year",onChange:function(e){se((function(n){return(0,l.Z)((0,l.Z)({},n),{},(0,o.Z)({},e.target.name,e.target.value))})),""!==e.target.value?ee(-1):ee(10)},children:[(0,B.jsx)("option",{value:"",selected:!0,children:"Filter: All Year"}),(0,B.jsx)("option",{value:"2023",children:"2023"}),(0,B.jsx)("option",{value:"2022",children:"2022"}),(0,B.jsx)("option",{value:"2021",children:"2021"}),(0,B.jsx)("option",{value:"2020",children:"2020"}),(0,B.jsx)("option",{value:"2019",children:"2019"})]})]})]}),(0,B.jsx)("div",{className:x,children:(0,B.jsxs)("table",{"aria-label":"custom pagination table",children:[(0,B.jsx)("thead",{children:(0,B.jsxs)("tr",{children:[(0,B.jsx)("th",{children:"Customer"}),(0,B.jsx)("th",{children:"Invoice"}),(0,B.jsx)("th",{children:"Total Amount"}),(0,B.jsx)("th",{children:"Payment"}),(0,B.jsx)("th",{children:"Created"}),(0,B.jsx)("th",{children:"Status"}),(0,B.jsx)("th",{children:"Received Amt"})]})}),(0,B.jsx)("tbody",{children:null!==X&&void 0!==X&&X.length?null===(e=$>0?null===G||void 0===G?void 0:G.slice(q*$,q*$+$):G)||void 0===e?void 0:e.map((function(e,n){var i,t,o,l,a,r,s,d;return(0,B.jsx)("tr",{className:"canceled"===(null===e||void 0===e||null===(i=e.status)||void 0===i?void 0:i.toLowerCase())||"cancelled"===(null===e||void 0===e||null===(t=e.status)||void 0===t?void 0:t.toLowerCase())?w:"",children:null===X||void 0===X||null===(o=X.filter((function(n){return(null===n||void 0===n?void 0:n.customer_id)==(null===e||void 0===e?void 0:e.customer_id)})))||void 0===o||null===(l=o.filter((function(n){var i,t,o,l,a,r;return null!==A&&void 0!==A&&A.search?(null===n||void 0===n||null===(i=n.company_name)||void 0===i||null===(t=i.toLowerCase())||void 0===t?void 0:t.includes(null===A||void 0===A||null===(o=A.search)||void 0===o?void 0:o.toLowerCase()))||(null===e||void 0===e||null===(l=e.invoice_number)||void 0===l||null===(a=l.toLowerCase())||void 0===a?void 0:a.includes(null===A||void 0===A||null===(r=A.search)||void 0===r?void 0:r.toLowerCase())):n})))||void 0===l||null===(a=l.filter((function(n){var i,t;return null!==re&&void 0!==re&&re.payment_status?(null===e||void 0===e||null===(i=e.payment_status)||void 0===i?void 0:i.toLowerCase())==(null===re||void 0===re||null===(t=re.payment_status)||void 0===t?void 0:t.toLowerCase()):n})))||void 0===a||null===(r=a.filter((function(n){var i;return null!==re&&void 0!==re&&re.month?(null===(i=new Date(null===e||void 0===e?void 0:e.invoice_date))||void 0===i?void 0:i.getMonth())==(null===re||void 0===re?void 0:re.month):n})))||void 0===r||null===(s=r.filter((function(n){var i;return null!==re&&void 0!==re&&re.year?(null===(i=new Date(null===e||void 0===e?void 0:e.invoice_date))||void 0===i?void 0:i.getFullYear())==(null===re||void 0===re?void 0:re.year):n})))||void 0===s||null===(d=s.filter((function(n){return null!==re&&void 0!==re&&re.company_id?(null===re||void 0===re?void 0:re.company_id)==(null===e||void 0===e?void 0:e.company_id):n})))||void 0===d?void 0:d.map((function(n,i){var t,o,l,a,r,s;return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)("td",{children:[(0,B.jsx)("a",{className:C,href:e.customerLink,children:null===n||void 0===n?void 0:n.company_name})," ",(0,B.jsx)("p",{children:null===n||void 0===n?void 0:n.account_email_id})]}),(0,B.jsxs)("td",{children:[(0,B.jsx)(T.rU,{to:"".concat(ce(null===e||void 0===e?void 0:e.invoice_number),"-").concat(ce(String(null===e||void 0===e?void 0:e.invoice_id))),className:y,children:null===e||void 0===e?void 0:e.invoice_number}),(0,B.jsx)("p",{className:g,children:null===e||void 0===e?void 0:e.invoiceDate})]}),(0,B.jsxs)("td",{children:[(0,B.jsxs)("p",{children:[(0,B.jsx)("span",{children:null!==e&&void 0!==e&&e.currency_type?null===e||void 0===e?void 0:e.currency_type:"INR"}),(0,B.jsxs)("span",{children:[" ",null===(t=Number(null===e||void 0===e?void 0:e.total_amount))||void 0===t?void 0:t.toFixed(2)]})]}),(0,B.jsx)("p",{className:g,children:(0,B.jsx)(T.rU,{className:f,to:ce(null===e||void 0===e?void 0:e.invoice_number),children:"View Invoice"})})]}),(0,B.jsxs)("td",{className:j,children:[(0,B.jsxs)(T.rU,{to:ce(null===e||void 0===e?void 0:e.invoice_number),children:[null!==e&&void 0!==e&&e.currency_type?null===e||void 0===e?void 0:e.currency_type:"INR"," ",null===e||void 0===e?void 0:e.total_amount," ","paid"===(null===e||void 0===e?void 0:e.payment_status)?"PAID":"UNPAID"]}),"paid"===(null===e||void 0===e?void 0:e.payment_status)?"":(0,B.jsxs)("p",{children:["Overdue by"," ",Math.round(Number((null===(o=new Date)||void 0===o?void 0:o.getTime())-(null===(l=new Date(null===e||void 0===e?void 0:e.invoice_date))||void 0===l?void 0:l.getTime()))/864e5)," ","days"]})]}),(0,B.jsxs)("td",{className:b,children:[(0,B.jsx)("p",{children:null===(a=new Date(null===e||void 0===e?void 0:e.invoice_date))||void 0===a?void 0:a.toLocaleDateString("en-in")}),(0,B.jsx)("p",{children:null===e||void 0===e?void 0:e.sale_by})]}),(0,B.jsx)("td",{children:(0,B.jsx)("span",{className:"active"===(null===e||void 0===e||null===(r=e.status)||void 0===r?void 0:r.toLowerCase())?Z:N,children:null===e||void 0===e?void 0:e.status})}),(0,B.jsxs)("td",{children:[(0,B.jsx)("p",{children:(0,B.jsxs)("span",{children:[null!==e&&void 0!==e&&e.currency_type?null===e||void 0===e?void 0:e.currency_type:"INR"," ",null!==e&&void 0!==e&&e.received_amount?null===e||void 0===e?void 0:e.received_amount:0]})}),(0,B.jsx)("p",{children:null!==e&&void 0!==e&&e.received_amount?null===(s=new Date(null===e||void 0===e?void 0:e.updatedAt))||void 0===s?void 0:s.toDateString():""})]})]})}))},n)})):(0,B.jsx)("div",{className:S,children:(0,B.jsx)("img",{src:E,alt:""})})}),(0,B.jsx)("tfoot",{children:(0,B.jsx)("tr",{children:(0,B.jsx)(J,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],colSpan:3,count:G.length,rowsPerPage:$,page:q,componentsProps:{select:{"aria-label":"rows per page"},actions:{showFirstButton:!0,showLastButton:!0}},onPageChange:function(e,n){V(n)},onRowsPerPageChange:function(e){ee(parseInt(e.target.value,10)),V(0)}})})})]})})]}),(0,B.jsx)("div",{className:m,children:(0,B.jsxs)("div",{className:_,children:[(0,B.jsxs)("section",{children:[(0,B.jsx)("h4",{children:"Total"}),(0,B.jsxs)("span",{children:["\u20b9",null===G||void 0===G||null===(n=G.reduce((function(e,n){return e+Number(null!==n&&void 0!==n&&n.current_USD_price?(null===n||void 0===n?void 0:n.current_USD_price)*(null===n||void 0===n?void 0:n.total_amount):null===n||void 0===n?void 0:n.total_amount)}),0))||void 0===n?void 0:n.toFixed(2)]})]}),(0,B.jsxs)("section",{children:[(0,B.jsx)("h4",{children:"Fully Paid"}),(0,B.jsxs)("span",{children:["\u20b9"," ",null===G||void 0===G||null===(i=G.reduce((function(e,n){return e+Number(null!==n&&void 0!==n&&n.received_amount?null!==n&&void 0!==n&&n.currency_type?(null===n||void 0===n?void 0:n.received_amount)*(null===n||void 0===n?void 0:n.current_USD_price):null===n||void 0===n?void 0:n.received_amount:0)}),0))||void 0===i?void 0:i.toFixed(2)]})]}),(0,B.jsxs)("section",{children:[(0,B.jsx)("h4",{children:"Receivables"}),(0,B.jsxs)("span",{children:[" ","\u20b9"," ",null===G||void 0===G?void 0:G.reduce((function(e,n){return e+=Number(Number(null!==n&&void 0!==n&&n.current_USD_price?(null===n||void 0===n?void 0:n.current_USD_price)*(null===n||void 0===n?void 0:n.total_amount):null===n||void 0===n?void 0:n.total_amount)-Number(null!==n&&void 0!==n&&n.received_amount?null!==n&&void 0!==n&&n.currency_type?(null===n||void 0===n?void 0:n.received_amount)*(null===n||void 0===n?void 0:n.current_USD_price):null===n||void 0===n?void 0:n.received_amount:0))}),0).toFixed(2)]})]})]})})]})]})}},554:function(e,n,i){"use strict";i.r(n),i.d(n,{useInvoiceContext:function(){return d}});var t=i(885),o=i(4569),l=i.n(o),a=i(2791),r=i(184),s=(0,a.createContext)(),d=function(){return(0,a.useContext)(s)};n.default=function(e){var n=e.children,i=(0,a.useState)([]),o=(0,t.Z)(i,2),d=o[0],c=o[1],u=(0,a.useState)([]),v=(0,t.Z)(u,2),p=v[0],h=v[1],m=(0,a.useState)([]),_=(0,t.Z)(m,2),x=_[0],g=_[1],f=(0,a.useCallback)((function(){l().get("https://finance.miratsoneservices.com/api/get-company").then((function(e){var n;return c(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.reverse())})).catch((function(e){return console.log(e)}))}),[d]),j=(0,a.useCallback)((function(){l().get("https://finance.miratsoneservices.com/api/get-invoice").then((function(e){var n;return g(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.reverse())})).catch((function(e){return console.log(e)}))}),[x]);function b(e){l().get("https://finance.miratsoneservices.com/api/get-signature").then((function(e){return h(null===e||void 0===e?void 0:e.data)})).catch((function(e){return console.log(e)}))}(0,a.useEffect)((function(){f(),j(),b()}),[]);var y={allCompanyData:d,allInvoicesData:x,setAllCompanyData:c,fetchAllCompanyData:j,fetchAllInvoicesData:f,fetchAllSignatureData:b,signatureData:p};return(0,r.jsx)(s.Provider,{value:y,children:n})}},1694:function(e,n){var i;!function(){"use strict";var t={}.hasOwnProperty;function o(){for(var e=[],n=0;n<arguments.length;n++){var i=arguments[n];if(i){var l=typeof i;if("string"===l||"number"===l)e.push(i);else if(Array.isArray(i)){if(i.length){var a=o.apply(null,i);a&&e.push(a)}}else if("object"===l){if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]")){e.push(i.toString());continue}for(var r in i)t.call(i,r)&&i[r]&&e.push(r)}}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(i=function(){return o}.apply(n,[]))||(e.exports=i)}()},6082:function(e,n,i){"use strict";e.exports=i.p+"static/media/loader.56ec7b0f514fa47b67e4.gif"},2480:function(){}}]);
//# sourceMappingURL=2376.2b7db086.chunk.js.map